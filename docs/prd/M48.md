# M48 â€” Vault custody publication/read contract scaffold (fixtures-first)

## Objective
Add deterministic custody snapshot publication and read/proof retrieval scaffolding for the vault track.

## Scope

### 1) Custody publication service scaffold
Implement a fixtures-first service for partner-operated custody publication:
- publish custody snapshots (`snapshot_id`, `recorded_at`, holdings)
- list snapshots with cursor pagination
- get snapshot by id
- get inclusion proof by snapshot + holding id

Built on M46 primitives (`CustodySnapshot`, `CustodyInclusionProof`).

### 2) Deterministic policy/constraints
- partner-only access for publication/read operations
- idempotent snapshot publication via global idempotency store
- duplicate `snapshot_id` rejection
- cursor validation for catalog pagination
- deterministic not-found errors for unknown snapshot/holding

### 3) Fixtures-first verifier
Scenario proves:
- publish success + idempotent replay
- idempotency payload mismatch rejection
- duplicate snapshot id rejection
- cursor pagination + invalid cursor failure
- snapshot retrieval + proof retrieval
- tampered proof detection (`root_mismatch`)
- partner-only enforcement

## Acceptance criteria
- `npm run verify:m48` exits 0.
- `node verify/runner.mjs milestones/M48.yaml` returns `overall=true`.
- artifacts exist under `artifacts/milestones/M48/latest/*`.

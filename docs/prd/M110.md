# M110 — Swarm transparency and user-control contracts (PRD-only, discovery-first)

## Objective
Define product-facing transparency and user-control contracts required for a trustworthy LP subsystem (clearly labeled bots/house liquidity, opt-out controls, and explainable counterparties).

## Scope
### A) Transparency directory contracts (to define)
1. `liquidityDirectory.list` → `GET /liquidity-providers/directory`
2. `liquidityDirectory.get` → `GET /liquidity-providers/directory/{provider_id}`
3. `liquidityDirectory.persona.list` → `GET /liquidity-providers/directory/{provider_id}/personas`

### B) User-control contracts (to define)
1. `counterpartyPreferences.get` → `GET /counterparty-preferences`
2. `counterpartyPreferences.upsert` → `POST /counterparty-preferences`
   - controls floor:
     - `allow_bots`
     - `allow_house_liquidity`
     - `allow_partner_lp`
     - category-level counterparty filters

### C) Projection contracts (to define)
1. `proposalCounterpartyDisclosure.get` → `GET /product-projections/proposals/{proposal_id}/counterparty-disclosure`
2. `receiptCounterpartyDisclosure.get` → `GET /product-projections/receipts/{receipt_id}/counterparty-disclosure`

### D) UX safety requirements
- Any LP counterparty must be explicitly labeled.
- No LP activity may be represented as human activity without disclosure.
- Users must be able to opt out of LP counterparties (subject to mode limitations disclosed in contract).

## Upstream dependencies
- M101 product projection contracts.
- M103 LP attribution primitives.
- M106/M108 decision explanation lineage.

## Deterministic reason-code floor (proposed)
- `counterparty_preferences_invalid`
- `counterparty_preferences_invalid_timestamp`
- `counterparty_preferences_conflict`
- `liquidity_directory_query_invalid`
- `counterparty_disclosure_not_found`

## Non-goals (M110)
- No web/iOS client implementation.
- No notification-delivery implementation changes.
- No recommendation-ranking implementation in this milestone.

## Acceptance (PRD stage)
M110 is accepted when:
1. transparency directory and user-control operations are explicit,
2. disclosure requirements are explicit and non-ambiguous,
3. projection contracts for proposal/receipt transparency are explicit,
4. deterministic reason-code floor is approved.

## Acceptance (future implementation stage)
- `npm run verify:m110` exits 0.
- `node verify/runner.ts milestones/M110.yaml` returns `overall=true`.
- Artifacts under `artifacts/milestones/M110/latest/*`.

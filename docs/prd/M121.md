# M121 â€” TypeScript shadow scaffold and parity gate (non-behavioral)

## Objective
Create a non-breaking TypeScript shadow scaffold for matching-core modules, with deterministic parity gates that prove runtime behavior remains anchored to existing JavaScript implementations.

## Scope
- Add `src-ts` shadow wrapper modules for matching-core and matching runtime dependencies.
- Keep wrappers read-only (`export *`) to existing `.mjs` modules with zero behavior drift.
- Add deterministic scaffold verification that validates wrapper wiring and export-surface parity.
- Compose parity dependencies from existing milestone verifiers:
  - `npm run verify:m5`
  - `npm run verify:m111`
  - `npm run verify:m114`

## Non-goals (M121)
- No runtime cutover to TypeScript modules.
- No API schema changes.
- No matcher algorithm changes.
- No global rollback-shadow suppression policy changes (tracked separately).

## Acceptance criteria
- `npm run verify:m121` exits 0.
- `npm run verify:m5` exits 0.
- `npm run verify:m111` exits 0.
- `npm run verify:m114` exits 0.
- Deterministic proof artifacts exist at `artifacts/milestones/M121/latest/*`.

## Required artifacts
- `src-ts/index.mts`
- `src-ts/matching/index.mts`
- `src-ts/matching/assetKeys.mts`
- `src-ts/matching/cycles.mts`
- `src-ts/matching/engine.mts`
- `src-ts/matching/graph.mts`
- `src-ts/matching/proposals.mts`
- `src-ts/matching/scoring.mts`
- `src-ts/matching/values.mts`
- `src-ts/matching/wantSpec.mts`
- `src-ts/service/marketplaceMatchingService.mts`
- `src-ts/store/jsonStateStore.mts`
- `src-ts/util/canonicalJson.mts`
- `scripts/run-m121-typescript-shadow-scenario.mjs`
- `fixtures/release/m121_scenario.json`
- `fixtures/release/m121_expected.json`
- `verify/m121.sh`
- `milestones/M121.yaml`
- `artifacts/milestones/M121/latest/typescript_shadow_output.json`
- `artifacts/milestones/M121/latest/assertions.json`
- `artifacts/milestones/M121/latest/commands.log`

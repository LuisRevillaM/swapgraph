# M70 â€” Rollout diagnostics automation attestation continuity anchors (fixtures-first)

## Objective
Expand diagnostics automation attestation coverage with explicit continuation anchors so downstream automation verifiers can bind each execution plan to signed continuation context (`attestation_after` / `checkpoint_after`).

## Scope

### 1) Execution-attestation continuity fields
Extend `automation_hints.execution_attestation` with:
- `continuation_attestation_after`
- `continuation_checkpoint_after`
- `continuation_hash`

### 2) Deterministic derivation
Derive continuity anchors deterministically from diagnostics query context and existing execution anchors:
- `continuation_attestation_after` mirrors query `attestation_after` (or `null`)
- `continuation_checkpoint_after` mirrors query `checkpoint_after` (or `null`)
- `continuation_hash` hashes:
  - `continuation_attestation_after`
  - `continuation_checkpoint_after`
  - `plan_hash`
  - `execution_attestation.attestation_hash`

### 3) Verifier parity
Enforce continuity-anchor consistency checks in both verification paths:
- default verifier
- public-key verifier

### 4) Contract/docs updates
Update diagnostics response schema + examples + API docs for continuity-anchor fields.

### 5) Fixtures-first verifier coverage
Scenario proves:
- first-page exports produce null continuation pointers with deterministic hash
- continuation exports produce linked continuation pointers + deterministic hash
- re-signed payload with tampered `continuation_hash` is rejected deterministically
- existing hash tamper detection remains enforced

## Acceptance criteria
- `npm run verify:m70` exits 0.
- `node verify/runner.ts milestones/M70.yaml` returns `overall=true`.
- artifacts exist under `artifacts/milestones/M70/latest/*`.

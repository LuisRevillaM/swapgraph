# M26 — Correlation IDs in remaining response contracts (intents / proposals / commit)

## Objective
Propagate **correlation IDs** across the remaining v1 REST **response contracts**:
- SwapIntent endpoints
- CycleProposal read endpoints
- Commit endpoints

SwapGraph’s contract principle is: `X-Correlation-Id` is always present in responses.
Because we’re still **fixtures-first** (no HTTP layer yet), we model that header in JSON bodies as a required `correlation_id` field.

## Scope
### 1) Schemas (response bodies)
Require `correlation_id` in:
- `SwapIntentUpsertResponse.schema.json`
- `SwapIntentCancelResponse.schema.json`
- `SwapIntentGetResponse.schema.json`
- `SwapIntentListResponse.schema.json`
- `CycleProposalListResponse.schema.json`
- `CycleProposalGetResponse.schema.json`
- `CommitResponse.schema.json`
- `CommitGetResponse.schema.json`

### 2) API examples
Update response examples to include `correlation_id`:
- `docs/spec/examples/api/swap_intents.create.response.json`
- `docs/spec/examples/api/swap_intents.cancel.response.json`
- `docs/spec/examples/api/cycle_proposals.list.response.json`
- `docs/spec/examples/api/cycle_proposals.accept.response.json`
- `docs/spec/examples/api/cycle_proposals.decline.response.json`
- `docs/spec/examples/api/commits.get.response.json`

### 3) Fixtures-first implementation
Ensure fixtures services populate deterministic correlation IDs:
- Intent responses: `corr_<intent_id>`
- Proposal/commit responses: `corr_<cycle_id>`
- List endpoints: stable, deterministic per-actor strings (since no real request header)

Impacted modules:
- `src/service/swapIntentsService.mjs`
- `src/read/cycleProposalsReadService.mjs`
- `src/commit/commitService.mjs`

## Acceptance criteria
- `npm run verify:m26` exits 0.
- `node verify/runner.mjs milestones/M26.yaml` exits 0.

## Required artifacts
- `docs/prd/M26.md`
- updated response schemas + API examples (see Scope)
- updated fixtures services (see Scope)
- proof artifacts under `artifacts/milestones/M26/latest/*`

# M21 â€” settlement.start loads commit+proposal from store + enforces partner proposal scoping

## Objective
Make settlement start behave like a real API handler:
- It **does not accept an injected proposal object**.
- It loads the `CycleProposal` from `store.state.proposals[cycle_id]`.
- It requires a **ready commit** in `store.state.commits`.
- It enforces that only the owning partner can start settlement for a proposal:
  - `store.state.tenancy.proposals[cycle_id].partner_id === actor.id`

This remains **fixtures-first** (no HTTP server).

## Inputs
- Proposals seeded into `store.state.proposals` from `fixtures/matching/m5_expected.json`.
- Proposal partner scoping seeded into `store.state.tenancy.proposals`.

## Rules (v1)
- Only `partner` can call `settlement.start`.
- If the proposal does not exist in store: `NOT_FOUND`.
- If the proposal exists but is scoped to a different partner: `FORBIDDEN`.
- If the commit is not ready: `NOT_FOUND` (commit missing) or `CONFLICT` (commit not ready).

## Scope
- Add an API-level service: `src/service/settlementStartService.mjs`.
- Add a fixtures scenario that proves:
  - wrong partner is forbidden **before** any cycle scope exists,
  - correct partner is blocked until commit is ready,
  - correct partner can start settlement once commit is ready,
  - starting settlement sets `store.state.tenancy.cycles[cycle_id].partner_id`.

## Acceptance criteria
- `npm run verify:m21` exits 0.
- `node verify/runner.ts milestones/M21.yaml` exits 0.

## Required artifacts
- `docs/prd/M21.md`
- `fixtures/settlement/m21_scenario.json`
- `fixtures/settlement/m21_expected.json`
- `src/service/settlementStartService.mjs`
- `scripts/run-m21-settlement-start-from-store-scenario.mjs`
- Proof outputs under `artifacts/milestones/M21/latest/*`

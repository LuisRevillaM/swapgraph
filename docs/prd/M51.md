# M51 â€” Vault settlement read surfaces for partners (fixtures-first)

## Objective
Expose deterministic partner read surfaces for vault-backed settlement cycles so operators can reconcile leg state, holding state, and cycle transition history from existing settlement read APIs.

## Scope

### 1) Settlement read response extensions
For partner reads on vault-backed cycles (`settlement.status`, `settlement.instructions`), include:
- `vault_reconciliation`
  - `summary` (`mode`, counts by holding state)
  - `entries[]` (intent, holding, leg status, holding status, settlement cycle binding)
- `state_transitions[]`
  - ordered projection of `cycle.state_changed` events (`occurred_at`, `from_state`, `to_state`, `reason_code`)

### 2) Non-vault / participant behavior
- Non-vault cycles remain unchanged (no vault reconciliation surface).
- Participant views remain redaction-safe and do not receive vault reconciliation payload.

### 3) Contract updates
Add read-surface schemas + API examples for vault-backed settlement status/instructions responses.

### 4) Fixtures-first verifier
Scenario proves:
- full vault cycle exposes partner reconciliation at `escrow.ready` and `completed`,
- participant read remains redacted and omits vault reconciliation,
- outsider participant read is forbidden,
- partial vault cycle exposes `mode=partial` and pending manual deposit instruction,
- failed timeout updates reconciliation counts/state transitions deterministically.

## Acceptance criteria
- `npm run verify:m51` exits 0.
- `node verify/runner.ts milestones/M51.yaml` returns `overall=true`.
- artifacts exist under `artifacts/milestones/M51/latest/*`.

# M68 â€” Rollout diagnostics automation execution attestation anchors (fixtures-first)

## Objective
Add signed execution-attestation anchors to diagnostics automation hints so operators can deterministically validate post-run outcomes against the planned automation bundle.

## Scope

### 1) Automation execution attestation object
Extend `automation_hints` with signed `execution_attestation`:
- `policy_version_before`
- `policy_version_after_expected`
- `non_empty_action_plan`
- `expected_effect_hash`
- `request_hash_chain`
- `attestation_hash`

### 2) Deterministic derivation rules
Derive attestation fields from current policy state + action request templates:
- `policy_version_after_expected` tracks projected version progression
- `expected_effect_hash` hashes ordered expected effects
- `request_hash_chain` hashes ordered request hashes
- `attestation_hash` hashes `plan_hash` + attestation payload

### 3) Integrity coverage
Ensure `execution_attestation` is included in diagnostics export hash/signature normalization and verification paths.

### 4) Contract/docs updates
Update diagnostics schema/examples/API text for execution-attestation fields and semantics.

### 5) Fixtures-first verifier
Scenario proves:
- execution attestation present and deterministic for 1-step and 2-step plans
- no-action plans include valid empty attestation anchors
- continuation/signature verification remains compatible
- tamper-fail verification behavior remains enforced

## Acceptance criteria
- `npm run verify:m68` exits 0.
- `node verify/runner.mjs milestones/M68.yaml` returns `overall=true`.
- artifacts exist under `artifacts/milestones/M68/latest/*`.

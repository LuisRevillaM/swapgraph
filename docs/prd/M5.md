# M5 — Matching engine v1 (2–3 party cycles) + deterministic selection

## Objective
Implement the core clearing value:
- ingest a set of active SwapIntents,
- build a compatibility graph,
- find candidate cycles (length 2–3),
- produce CycleProposals with explainability + fee preview,
- select a disjoint set deterministically.

This milestone is **fixtures-first** and does not require any live integrations.

## Scope
- Compatibility graph builder (want_spec satisfaction + value band filtering).
- Cycle detection for length 2 and 3.
- Proposal generation:
  - participant give/get mapping
  - `value_spread`, `confidence_score`, `fee_breakdown`, `explainability`
- Disjoint selection (no shared intent across selected proposals).
- Fixture runner that:
  - runs matching on fixture input,
  - validates output proposals against the JSON Schemas,
  - compares output to expected snapshot,
  - emits proof artifacts.

## Non-goals
- No commit handshake yet.
- No settlement.
- No webhooks/streams delivery.

## Acceptance criteria
- `npm run verify:m5` exits 0.
- `node verify/runner.ts milestones/M5.yaml` exits 0.
- Proof artifacts exist at `artifacts/milestones/M5/latest/*`.

## Required artifacts
- Fixtures:
  - `fixtures/matching/m5_input.json`
  - `fixtures/matching/m5_expected.json`
- Proof:
  - `artifacts/milestones/M5/latest/matching_output.json`
  - `artifacts/milestones/M5/latest/assertions.json`
  - `artifacts/milestones/M5/latest/commands.log`

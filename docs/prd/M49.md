# M49 â€” Vault API auth/scope wiring + transport contract surface (fixtures-first)

## Objective
Wire vault and custody-publication services into the API auth/scope contract so `AUTHZ_ENFORCE=1` applies uniformly using manifest-driven operation metadata.

## Scope

### 1) API transport contract surface
Add vault endpoints to the API manifest + schemas/examples for:
- vault lifecycle (`deposit`, `reserve`, `release`, `withdraw`, `get`, `list`)
- custody publication/read (`publish`, `list`, `get`, `proof`)

### 2) Auth/scope taxonomy wiring
- introduce vault scopes:
  - `vault:read`
  - `vault:write`
- update auth validator + auth docs scope taxonomy.

### 3) Service-level manifest auth enforcement
Wire both vault services through `authorizeApiOperation` operation ids:
- `VaultLifecycleService`
- `VaultCustodyPublicationService`

### 4) Fixtures-first auth-surface verifier
Scenario proves:
- allowed role+scope combinations succeed,
- missing scopes fail with `INSUFFICIENT_SCOPE`,
- disallowed actor types fail with `FORBIDDEN`,
- business constraints still enforce deterministic reason codes,
- custody proof retrieval remains verifiable and tamper-detecting.

## Acceptance criteria
- `npm run verify:m49` exits 0.
- `node verify/runner.ts milestones/M49.yaml` returns `overall=true`.
- artifacts exist under `artifacts/milestones/M49/latest/*`.

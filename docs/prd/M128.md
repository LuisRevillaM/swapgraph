# M128 â€” TypeScript service wrapper-removal compatibility gate (non-breaking)

## Objective
Remove `export *` wrapper indirection for `src-ts/service/marketplaceMatchingService.mts` using a concrete class shim while preserving compatibility with existing TS scaffold contracts.

## Scope
- Convert `src-ts/service/marketplaceMatchingService.mts` from wrapper export to concrete class shim.
- Update M121 verifier/scenario contract to allow concrete class-symbol parity for this module.
- Add dedicated M128 verifier artifacts that prove:
  - no wrapper `export *` remains in TS service module
  - expected class export surface parity with JS source module
  - M121 contract is updated (`allow_concrete` + explicit export symbol)
- Compose gates on:
  - `npm run verify:m127`
  - `npm run verify:m121`

## Non-goals (M128)
- No runtime cutover to TS service execution.
- No API/schema changes.
- No matcher behavior changes.
- No class internals migration to TS in this milestone.

## Acceptance criteria
- `npm run verify:m128` exits 0.
- `npm run verify:m127` exits 0.
- `npm run verify:m121` exits 0.
- Deterministic proof artifacts exist at `artifacts/milestones/M128/latest/*`.

## Required artifacts
- `docs/prd/M128.md`
- `src-ts/service/marketplaceMatchingService.mts`
- `scripts/run-m121-typescript-shadow-scenario.mjs`
- `fixtures/release/m121_scenario.json`
- `fixtures/release/m121_expected.json`
- `scripts/run-m128-typescript-service-wrapper-removal-scenario.mjs`
- `fixtures/release/m128_scenario.json`
- `fixtures/release/m128_expected.json`
- `verify/m128.sh`
- `milestones/M128.yaml`
- `artifacts/milestones/M128/latest/typescript_service_wrapper_removal_output.json`
- `artifacts/milestones/M128/latest/assertions.json`
- `artifacts/milestones/M128/latest/commands.log`

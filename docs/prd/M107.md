# M107 — Operator-assisted settlement and Steam-safe execution controls (PRD-only, implementation-ready)

## Objective
Define LP execution-mode contracts that support operator-assisted settlement as the default high-safety path, with explicit guardrails for platform-restricted automation contexts.

## Why this is required (integration findings)
- Existing live-proof milestones already use integration-gated operator workflows.
- Steam-first execution risk requires conservative automation posture.
- LP subsystem must encode execution governance as contracts, not tribal runbook behavior.

## Scope
### A) Execution mode contracts (to define)
1. `liquidityExecution.mode.upsert` → `POST /liquidity-providers/{provider_id}/execution-mode`
   - mode enum: `simulation`, `operator_assisted`, `constrained_auto`
2. `liquidityExecution.mode.get` → `GET /liquidity-providers/{provider_id}/execution-mode`

### B) Operator-approval contracts (to define)
1. `liquidityExecution.request.record` → `POST /liquidity-providers/{provider_id}/execution-requests`
2. `liquidityExecution.request.approve` → `POST /liquidity-providers/{provider_id}/execution-requests/{request_id}/approve`
3. `liquidityExecution.request.reject` → `POST /liquidity-providers/{provider_id}/execution-requests/{request_id}/reject`
4. `liquidityExecution.export` → `GET /liquidity-providers/{provider_id}/execution-requests/export`

### C) Safety constraints
- `operator_assisted` required by default for restricted adapter contexts unless explicit override is approved.
- High-value or high-risk actions require explicit operator approval records.
- Execution exports must be signed and continuity-verifiable.
- Integration-gated validations required for adapter-backed execution paths.

## Proposed schema artifacts (naming target)
- `LiquidityExecutionModeUpsertRequest.schema.json`
- `LiquidityExecutionModeUpsertResponse.schema.json`
- `LiquidityExecutionModeGetResponse.schema.json`
- `LiquidityExecutionRequestRecordRequest.schema.json`
- `LiquidityExecutionRequestRecordResponse.schema.json`
- `LiquidityExecutionRequestApproveRequest.schema.json`
- `LiquidityExecutionRequestApproveResponse.schema.json`
- `LiquidityExecutionRequestRejectRequest.schema.json`
- `LiquidityExecutionRequestRejectResponse.schema.json`
- `LiquidityExecutionRequestExportResponse.schema.json`

## Deterministic reason-code floor (proposed)
- `liquidity_execution_mode_invalid`
- `liquidity_execution_mode_restricted`
- `liquidity_execution_request_invalid`
- `liquidity_execution_request_not_found`
- `liquidity_execution_operator_approval_required`
- `liquidity_execution_platform_policy_blocked`

## Non-goals (M107)
- No legal interpretation automation.
- No unrestricted full-automation rollout.
- No UI implementation for operator consoles.

## Acceptance (PRD stage)
M107 is accepted when:
1. execution mode and operator approval operations are explicit,
2. default safety posture and override policy are explicit,
3. signed export integrity boundaries are explicit,
4. integration-gated expectations are explicit.

## Acceptance (future implementation stage)
- `INTEGRATION_ENABLED=1 npm run verify:m107` exits 0.
- `INTEGRATION_ENABLED=1 node verify/runner.ts milestones/M107.yaml` returns `overall=true`.
- Artifacts under `artifacts/milestones/M107/latest/*`.

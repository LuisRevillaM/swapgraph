# M15 â€” Read-side redaction + filtering (partner vs participant views)

## Objective
Make the **privacy model** of read endpoints explicit and verifiable.

We already proved (M14) that reads are authorized:
- partners can read
- participant users can read
- outsiders/agents are forbidden

This milestone adds a second dimension: **what each authorized actor is allowed to see**.

## Endpoints in scope
- `GET /settlement/{cycle_id}/instructions`
- `GET /settlement/{cycle_id}/status`
- `GET /receipts/{cycle_id}`

## View rules (v1)
### Partner view
Partners get the full timeline object:
- full `from_actor` / `to_actor` ids
- deposit refs/timestamps (when present)

### Participant user view
Participant users get a **redacted timeline**:
- all non-self actors have `actor.id = "redacted"`
- deposit/release/refund refs + timestamps are **omitted** for legs where `from_actor` is not the requesting user
- leg `status` and deadlines remain visible so users can see anonymized progress

### Instructions filtering
- Partner: receives deposit instructions for **all** pending depositors.
- Participant user: receives deposit instructions **only for themselves** (if their leg is still pending); otherwise an empty list.

### Receipt view
Receipts do not contain actor ids, so the response is the same for partner vs participant user (authz still applies).

## Acceptance criteria
- `npm run verify:m15` exits 0.
- `node verify/runner.mjs milestones/M15.yaml` exits 0.

## Required artifacts
Fixtures:
- `fixtures/settlement/m15_scenario.json`
- `fixtures/settlement/m15_expected.json`

Proof artifacts:
- `artifacts/milestones/M15/latest/redaction_output.json`
- `artifacts/milestones/M15/latest/assertions.json`
- `artifacts/milestones/M15/latest/commands.log`

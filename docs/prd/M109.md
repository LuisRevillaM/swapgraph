# M109 — Partner liquidity-provider onboarding and governance contracts (implemented, fixtures-first)

Status: Implemented and verifier-closed on 2026-02-22 (`npm run verify:m109`, `node verify/runner.mjs milestones/M109.yaml`).

## Objective
Define deterministic partner LP onboarding, eligibility, rollout, and governance-audit contracts so external liquidity can be activated safely under trust, reliability, and segment controls.

## Why this is required (integration findings)
- LP primitives and autonomy policy contracts exist but partner LP governance lifecycle was missing.
- Segment-gated rollout and downgrade triggers must be contract-enforced before production onboarding.
- Partner governance needs signed exports with continuation parity for audit and support workflows.

## Scope
### A) Partner LP onboarding/status contracts (implemented)
1. `partnerLiquidityProvider.onboard` → `POST /partner-liquidity-providers`
2. `partnerLiquidityProvider.get` → `GET /partner-liquidity-providers/{provider_id}`
3. `partnerLiquidityProvider.status.upsert` → `POST /partner-liquidity-providers/{provider_id}/status`

### B) Eligibility/rollout governance contracts (implemented)
1. `partnerLiquidityProvider.eligibility.evaluate` → `POST /partner-liquidity-providers/{provider_id}/eligibility/evaluate`
2. `partnerLiquidityProvider.rollout.upsert` → `POST /partner-liquidity-providers/{provider_id}/rollout`
3. `partnerLiquidityProvider.rollout.export` → `GET /partner-liquidity-providers/{provider_id}/rollout/export`

### C) Governance requirements (enforced)
- Segment-aware capability gating (`S0`..`S3`) with deterministic rollout blocking.
- Explicit downgrade gating when baseline controls fail or unresolved critical violations exist.
- Signed governance export with attestation/checkpoint continuity and retention-bounded checkpoint lifecycle.

## Implemented schema artifacts
- `PartnerLiquidityProviderView.schema.json`
- `PartnerLiquidityProviderOnboardRequest.schema.json`
- `PartnerLiquidityProviderOnboardResponse.schema.json`
- `PartnerLiquidityProviderGetResponse.schema.json`
- `PartnerLiquidityProviderStatusUpsertRequest.schema.json`
- `PartnerLiquidityProviderStatusUpsertResponse.schema.json`
- `PartnerLiquidityProviderEligibilityEvaluateRequest.schema.json`
- `PartnerLiquidityProviderEligibilityEvaluateResponse.schema.json`
- `PartnerLiquidityProviderRolloutPolicyView.schema.json`
- `PartnerLiquidityProviderRolloutUpsertRequest.schema.json`
- `PartnerLiquidityProviderRolloutUpsertResponse.schema.json`
- `PartnerLiquidityProviderGovernanceAuditEntry.schema.json`
- `PartnerLiquidityProviderRolloutExportResponse.schema.json`

## Deterministic reason-code floor (enforced)
- `partner_liquidity_provider_invalid`
- `partner_liquidity_provider_not_found`
- `partner_liquidity_provider_eligibility_failed`
- `partner_liquidity_provider_rollout_blocked`
- `partner_liquidity_provider_downgrade_required`

## Non-goals (M109)
- No settlement ledger/payment transfer implementation changes.
- No legal/compliance workflow automation.
- No production rollout toggle activation in this milestone.

## Acceptance (implementation stage)
- `npm run verify:m109` exits 0.
- `node verify/runner.mjs milestones/M109.yaml` returns `overall=true`.
- Artifacts under `artifacts/milestones/M109/latest/*`.

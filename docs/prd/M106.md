# M106 — House LP listing and proposal participation contracts (PRD-only, implementation-ready)

## Objective
Define deterministic contract paths for house LPs to publish intents and participate in proposal commit decisions with explicit explanation and audit linkage.

## Why this is required (integration findings)
- Current commit accept/decline contracts are user-centric.
- LP participation must not rely on hidden/internal shortcuts.
- Strategy credibility depends on clear “why accepted/declined” lineage.

## Scope
### A) LP listing generation contracts (to define)
1. `liquidityListings.upsert` → `POST /liquidity-providers/{provider_id}/listings`
2. `liquidityListings.cancel` → `POST /liquidity-providers/{provider_id}/listings/{intent_id}/cancel`
3. `liquidityListings.list` → `GET /liquidity-providers/{provider_id}/listings`

### B) LP proposal decision contracts (to define)
1. `liquidityDecisions.proposal.accept` → `POST /liquidity-providers/{provider_id}/proposals/{proposal_id}/accept`
2. `liquidityDecisions.proposal.decline` → `POST /liquidity-providers/{provider_id}/proposals/{proposal_id}/decline`
3. `liquidityDecisions.get` → `GET /liquidity-providers/{provider_id}/decisions/{decision_id}`

### C) Decision explanation requirements
- Every LP decision requires:
  - `decision_reason_codes[]`
  - `policy_ref`
  - `confidence_score_bps`
  - `risk_tier_snapshot`
  - `correlation_id`
- Decision records must map to intent/proposal/commit lineage.

## Contract constraints
- LP actions are idempotent and replay-safe.
- LP decisions cannot bypass existing trust/safety policy outcomes.
- Decision writes and reads must preserve deterministic reason-code taxonomy.

## Proposed schema artifacts (naming target)
- `LiquidityListingUpsertRequest.schema.json`
- `LiquidityListingUpsertResponse.schema.json`
- `LiquidityListingCancelRequest.schema.json`
- `LiquidityListingCancelResponse.schema.json`
- `LiquidityListingListResponse.schema.json`
- `LiquidityProposalDecisionAcceptRequest.schema.json`
- `LiquidityProposalDecisionAcceptResponse.schema.json`
- `LiquidityProposalDecisionDeclineRequest.schema.json`
- `LiquidityProposalDecisionDeclineResponse.schema.json`
- `LiquidityDecisionGetResponse.schema.json`

## Proposed event additions
- `liquidity.listing.published`
- `liquidity.decision.recorded`

## Deterministic reason-code floor (proposed)
- `liquidity_listing_invalid`
- `liquidity_listing_policy_violation`
- `liquidity_listing_not_found`
- `liquidity_decision_invalid`
- `liquidity_decision_policy_missing`
- `liquidity_decision_not_found`

## Non-goals (M106)
- No full autonomous execution rollout.
- No UI implementation for persona pages.
- No partner LP onboarding (handled in later milestone).

## Acceptance (PRD stage)
M106 is accepted when:
1. LP listing + proposal decision operations are explicit,
2. explanation lineage requirements are explicit,
3. trust/safety non-bypass constraints are explicit,
4. deterministic reason-code floor is approved.

## Acceptance (future implementation stage)
- `npm run verify:m106` exits 0.
- `node verify/runner.ts milestones/M106.yaml` returns `overall=true`.
- Artifacts under `artifacts/milestones/M106/latest/*`.

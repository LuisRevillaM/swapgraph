# M3 — Events contract + replay proof (webhooks/streams)

## Objective
Turn the v2.0 plan’s event-driven integration promise into a **machine-checkable contract**.

By the end of M3 we should be able to:
- enumerate supported event types,
- validate event envelopes and payloads,
- replay an append-only event log from a checkpoint and deterministically reconstruct state.

## Scope
- Events manifest: `docs/spec/events/manifest.v1.json`.
- Payload schemas for each event type under `docs/spec/schemas/`.
- Fixtures:
  - `fixtures/events/event_log.v1.ndjson`
  - `fixtures/events/replay_expected.json`
- Verifiers that:
  - validate the manifest and required schemas,
  - validate replay succeeds and matches expected output,
  - emit stable proof artifacts.

## Non-goals
- No webhook signing yet (that is a later milestone).
- No real stream transport (SSE/WS) yet.

## Acceptance criteria
- `npm run verify:m3` exits 0.
- `node verify/runner.mjs milestones/M3.yaml` exits 0.
- Proof artifacts exist at `artifacts/milestones/M3/latest/*`.

## Required artifacts
- `docs/spec/events/manifest.v1.json`
- `fixtures/events/event_log.v1.ndjson`
- `fixtures/events/replay_expected.json`
- `artifacts/milestones/M3/latest/events_validation.json`
- `artifacts/milestones/M3/latest/replay_output.json`
- `artifacts/milestones/M3/latest/commands.log`
